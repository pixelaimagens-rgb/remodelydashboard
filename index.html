<!DOCTYPE html>
<html lang="pt-BR" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Remodely - Painel da Dona</title>
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Montserrat -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Lucide Icons via CDN -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Chart.js para gráficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style type="text/tailwindcss">
        @layer base {
            body {
                font-family: 'Montserrat', sans-serif;
                background-color: #1a1a1a;
                color: #f0f0f0;
            }
        }
        @layer components {
            .sidebar {
                @apply bg-gradient-to-b from-gray-900 to-gray-800 text-gray-200 w-64 min-h-screen p-4 fixed top-0 left-0 z-30 transition-all duration-300;
            }
            .sidebar a {
                @apply block py-3 px-4 rounded-lg mb-2 transition-colors duration-200 flex items-center;
            }
            .sidebar a:hover, .sidebar a.active {
                @apply bg-gray-700 text-yellow-400;
            }
            .content-section {
                @apply bg-gray-800 rounded-xl shadow-lg p-6 mt-4;
            }
            .card {
                @apply bg-gray-700 rounded-xl shadow-md p-6 transition-transform duration-200 hover:shadow-xl hover:-translate-y-1;
            }
            .btn-primary {
                @apply bg-yellow-500 hover:bg-yellow-600 text-gray-900 font-semibold py-2 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center;
            }
            .btn-secondary {
                @apply bg-gray-600 hover:bg-gray-500 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200;
            }
            .btn-success {
                @apply bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200;
            }
            .btn-danger {
                @apply bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200;
            }
            .input-field {
                @apply bg-gray-600 text-white border border-gray-500 rounded-lg px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-yellow-500 transition-colors duration-200;
            }
            .table {
                @apply min-w-full divide-y divide-gray-600;
            }
            .table th {
                @apply px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider;
            }
            .table td {
                @apply px-4 py-3 whitespace-nowrap text-sm text-gray-200;
            }
            .status-ativo {
                @apply text-green-400;
            }
            .status-inativo {
                @apply text-red-400;
            }
            .status-potencial {
                @apply text-yellow-400;
            }
            .status-em-tratamento {
                @apply text-blue-400;
            }
            .status-agendado {
                @apply text-blue-400;
            }
            .status-realizado {
                @apply text-green-400;
            }
            .status-cancelado {
                @apply text-red-400;
            }
            .notification {
                @apply fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 max-w-sm transform transition-transform duration-300 opacity-0 translate-x-full;
            }
            .notification.show {
                @apply opacity-100 translate-x-0;
            }
            .notification.success {
                @apply bg-green-600 text-white;
            }
            .notification.error {
                @apply bg-red-600 text-white;
            }
            .notification.info {
                @apply bg-blue-600 text-white;
            }
            .notification.warning {
                @apply bg-yellow-600 text-white;
            }
            .chart-container {
                @apply h-64 w-full;
            }
        }
    </style>
</head>
<body class="bg-gray-900">
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="text-2xl font-bold mb-10 text-center text-yellow-400 flex items-center justify-center">
            <i data-lucide="spa" class="mr-2"></i> Remodely
        </div>
        <nav>
            <a href="#" class="active flex items-center" onclick="showSection('dashboard-section', event)">
                <i data-lucide="layout-dashboard" class="mr-2"></i> Dashboard
            </a>
            <a href="#" class="flex items-center" onclick="showSection('clientes-section', event)">
                <i data-lucide="users" class="mr-2"></i> Clientes
            </a>
            <a href="#" class="flex items-center" onclick="showSection('agendamentos-section', event)">
                <i data-lucide="calendar" class="mr-2"></i> Agendamentos
            </a>
            <a href="#" class="flex items-center" onclick="showSection('servicos-section', event)">
                <i data-lucide="scissors" class="mr-2"></i> Serviços
            </a>
            <a href="#" class="flex items-center" onclick="showSection('relatorios-section', event)">
                <i data-lucide="bar-chart-3" class="mr-2"></i> Relatórios
            </a>
            <a href="#" class="flex items-center" onclick="showSection('configuracoes-section', event)">
                <i data-lucide="settings" class="mr-2"></i> Configurações
            </a>
        </nav>
    </div>
    <!-- Main Content -->
    <div class="ml-64 p-6">
        <div class="notification" id="notification"></div>

        <!-- Dashboard Section -->
        <section id="dashboard-section" class="content-section">
            <h2 class="text-2xl font-bold text-gray-100 mb-6 flex items-center">
                <i data-lucide="trending-up" class="mr-2 text-yellow-400"></i> Dashboard
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="card bg-gradient-to-r from-green-600 to-emerald-700 text-white">
                    <div class="flex justify-between items-center">
                        <h3 class="text-lg font-semibold">Total de Clientes</h3>
                        <i data-lucide="users" class="text-2xl"></i>
                    </div>
                    <p class="text-3xl font-bold mt-2" id="totalClientsCount">0</p>
                </div>
                <div class="card bg-gradient-to-r from-blue-600 to-indigo-700 text-white">
                    <div class="flex justify-between items-center">
                        <h3 class="text-lg font-semibold">Agendamentos Hoje</h3>
                        <i data-lucide="calendar-check" class="text-2xl"></i>
                    </div>
                    <p class="text-3xl font-bold mt-2" id="todaysAppointmentsCount">0</p>
                </div>
                <div class="card bg-gradient-to-r from-purple-600 to-fuchsia-700 text-white">
                    <div class="flex justify-between items-center">
                        <h3 class="text-lg font-semibold">Clientes Ativos</h3>
                        <i data-lucide="user-check" class="text-2xl"></i>
                    </div>
                    <p class="text-3xl font-bold mt-2" id="activeClientsCount">0</p>
                </div>
                <div class="card bg-gradient-to-r from-yellow-600 to-amber-700 text-gray-900">
                    <div class="flex justify-between items-center">
                        <h3 class="text-lg font-semibold">Receita do Mês</h3>
                        <i data-lucide="dollar-sign" class="text-2xl"></i>
                    </div>
                    <p class="text-3xl font-bold mt-2" id="monthlyRevenue">R$ 0,00</p>
                </div>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="card">
                    <h3 class="text-xl font-semibold text-gray-100 mb-4 flex items-center">
                        <i data-lucide="clock" class="mr-2 text-blue-400"></i> Próximos Agendamentos
                    </h3>
                    <div id="upcomingAppointmentsList">
                        <p class="text-gray-400">Carregando...</p>
                    </div>
                </div>
                <div class="card">
                    <h3 class="text-xl font-semibold text-gray-100 mb-4 flex items-center">
                        <i data-lucide="user-plus" class="mr-2 text-green-400"></i> Clientes Recentes
                    </h3>
                    <div id="recentClientsList">
                        <p class="text-gray-400">Carregando...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Clientes Section -->
        <section id="clientes-section" class="content-section hidden">
            <h2 class="text-2xl font-bold text-gray-100 mb-6 flex items-center">
                <i data-lucide="users" class="mr-2 text-yellow-400"></i> Gerenciar Clientes
            </h2>
            <div class="flex justify-between mb-6">
                <button class="btn-primary" onclick="openModal('clientModal')">
                    <i data-lucide="plus" class="mr-2"></i> Adicionar Cliente
                </button>
                <div class="flex">
                    <input type="text" id="searchClients" class="input-field w-64" placeholder="Buscar cliente...">
                    <button class="btn-secondary ml-2" onclick="searchClients()">
                        <i data-lucide="search"></i>
                    </button>
                </div>
            </div>
            <div class="card">
                <div class="overflow-x-auto">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Telefone</th>
                                <th>Email</th>
                                <th>Status</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="clientsTableBody">
                            <tr><td colspan="5" class="text-center text-gray-400">Carregando...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Agendamentos Section -->
        <section id="agendamentos-section" class="content-section hidden">
            <h2 class="text-2xl font-bold text-gray-100 mb-6 flex items-center">
                <i data-lucide="calendar" class="mr-2 text-yellow-400"></i> Gerenciar Agendamentos
            </h2>
            <div class="flex justify-between mb-6">
                <button class="btn-primary" onclick="openModal('appointmentModal')">
                    <i data-lucide="plus" class="mr-2"></i> Adicionar Agendamento
                </button>
                <div class="flex">
                    <input type="date" id="filterDate" class="input-field mr-2">
                    <button class="btn-secondary" onclick="filterAppointments()">Filtrar por Data</button>
                </div>
            </div>
            <div class="card">
                <div class="overflow-x-auto">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Horário</th>
                                <th>Cliente</th>
                                <th>Serviço</th>
                                <th>Status</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="appointmentsTableBody">
                            <tr><td colspan="6" class="text-center text-gray-400">Carregando...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Serviços Section -->
        <section id="servicos-section" class="content-section hidden">
            <h2 class="text-2xl font-bold text-gray-100 mb-6 flex items-center">
                <i data-lucide="scissors" class="mr-2 text-yellow-400"></i> Gerenciar Serviços
            </h2>
            <div class="flex justify-between mb-6">
                <button class="btn-primary" onclick="openModal('serviceModal')">
                    <i data-lucide="plus" class="mr-2"></i> Adicionar Serviço
                </button>
            </div>
            <div class="card">
                <div class="overflow-x-auto">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Descrição</th>
                                <th>Duração (min)</th>
                                <th>Preço (R$)</th>
                                <th>Status</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="servicesTableBody">
                            <tr><td colspan="6" class="text-center text-gray-400">Carregando...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Relatórios Section -->
        <section id="relatorios-section" class="content-section hidden">
            <h2 class="text-2xl font-bold text-gray-100 mb-6 flex items-center">
                <i data-lucide="bar-chart-3" class="mr-2 text-yellow-400"></i> Relatórios Avançados
            </h2>
            
            <!-- Filtros -->
            <div class="flex flex-wrap gap-4 mb-6">
                <div>
                    <label class="block text-gray-300 text-sm font-medium mb-2">Período</label>
                    <select id="reportPeriod" class="input-field">
                        <option value="daily">Diário</option>
                        <option value="weekly">Semanal</option>
                        <option value="monthly" selected>Mensal</option>
                    </select>
                </div>
                <div id="dateFilter" class="hidden">
                    <label class="block text-gray-300 text-sm font-medium mb-2">Data</label>
                    <input type="date" id="reportDate" class="input-field" value="">
                </div>
                <div id="monthFilter">
                    <label class="block text-gray-300 text-sm font-medium mb-2">Mês/Ano</label>
                    <input type="month" id="reportMonth" class="input-field" value="">
                </div>
                <button class="btn-primary mt-6" onclick="loadReports()">Carregar Relatório</button>
                <button class="btn-secondary mt-6" onclick="exportReportToCSV()">Exportar CSV</button>
            </div>

            <!-- Cards de Resumo -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="card bg-gradient-to-r from-blue-600 to-indigo-700 text-white">
                    <h3 class="text-lg font-semibold">Agendamentos Realizados</h3>
                    <p class="text-3xl font-bold mt-2" id="reportAppointments">0</p>
                </div>
                <div class="card bg-gradient-to-r from-green-600 to-emerald-700 text-white">
                    <h3 class="text-lg font-semibold">Receita</h3>
                    <p class="text-3xl font-bold mt-2" id="reportRevenue">R$ 0,00</p>
                </div>
                <div class="card bg-gradient-to-r from-purple-600 to-fuchsia-700 text-white">
                    <h3 class="text-lg font-semibold">Novos Clientes</h3>
                    <p class="text-3xl font-bold mt-2" id="reportNewClients">0</p>
                </div>
            </div>

            <!-- Gráficos -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                <div class="card">
                    <h3 class="text-xl font-semibold text-gray-100 mb-4">Receita por Mês</h3>
                    <div class="chart-container">
                        <canvas id="revenueChart"></canvas>
                    </div>
                </div>
                <div class="card">
                    <h3 class="text-xl font-semibold text-gray-100 mb-4">Novos Clientes por Mês</h3>
                    <div class="chart-container">
                        <canvas id="newClientsChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Detalhes -->
            <div class="card">
                <h3 class="text-xl font-semibold text-gray-100 mb-4">Detalhes do Período</h3>
                <div id="reportDetails">Selecione um período para visualizar os dados.</div>
            </div>
        </section>

        <!-- Configurações Section -->
        <section id="configuracoes-section" class="content-section hidden">
            <h2 class="text-2xl font-bold text-gray-100 mb-6 flex items-center">
                <i data-lucide="settings" class="mr-2 text-yellow-400"></i> Configurações
            </h2>
            <div class="card space-y-6">
                <div>
                    <h3 class="text-xl font-semibold text-gray-100 mb-4">Perfil da Clínica</h3>
                    <form class="space-y-4">
                        <div>
                            <label class="block text-gray-300 text-sm font-medium mb-2">Nome da Clínica</label>
                            <input type="text" class="input-field w-full" value="Clínica Remodely">
                        </div>
                        <div>
                            <label class="block text-gray-300 text-sm font-medium mb-2">Telefone</label>
                            <input type="text" class="input-field w-full" value="(11) 98765-4321">
                        </div>
                        <div>
                            <label class="block text-gray-300 text-sm font-medium mb-2">E-mail</label>
                            <input type="email" class="input-field w-full" value="contato@remodely.com.br">
                        </div>
                        <div>
                            <label class="block text-gray-300 text-sm font-medium mb-2">Endereço</label>
                            <input type="text" class="input-field w-full" value="Av. Paulista, 1000 - São Paulo">
                        </div>
                        <button class="btn-primary">Salvar</button>
                    </form>
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-gray-100 mb-4">Usuários</h3>
                    <p class="text-gray-400 mb-4">Funcionalidade para adicionar/remover profissionais e definir permissões (requer back-end).</p>
                    <button class="btn-secondary">Gerenciar Usuários</button>
                </div>
            </div>
        </section>

        <!-- Modals -->
        <div id="clientModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
            <div class="bg-gray-800 rounded-xl p-6 w-11/12 max-w-2xl">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold text-gray-100" id="clientModalTitle">Adicionar Novo Cliente</h3>
                    <button class="text-gray-400 hover:text-gray-200" onclick="closeModal('clientModal')">
                        <i data-lucide="x"></i>
                    </button>
                </div>
                <form class="space-y-4" id="clientForm">
                    <input type="hidden" id="clientId">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-gray-300 text-sm font-medium mb-2">Nome *</label>
                            <input type="text" id="clientName" class="input-field" required>
                        </div>
                        <div>
                            <label class="block text-gray-300 text-sm font-medium mb-2">Telefone *</label>
                            <input type="text" id="clientPhone" class="input-field" required>
                        </div>
                    </div>
                    <div>
                        <label class="block text-gray-300 text-sm font-medium mb-2">E-mail</label>
                        <input type="email" id="clientEmail" class="input-field">
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-gray-300 text-sm font-medium mb-2">Status</label>
                            <select id="clientStatus" class="input-field">
                                <option value="Ativo">Ativo</option>
                                <option value="Inativo">Inativo</option>
                                <option value="Potencial">Potencial</option>
                                <option value="Em Tratamento">Em Tratamento</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-gray-300 text-sm font-medium mb-2">Altura (cm)</label>
                            <input type="number" id="clientHeight" class="input-field">
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-gray-300 text-sm font-medium mb-2">Peso (kg)</label>
                            <input type="number" id="clientWeight" class="input-field">
                        </div>
                        <div>
                            <label class="block text-gray-300 text-sm font-medium mb-2">Doenças Preexistentes</label>
                            <input type="text" id="clientDiseases" class="input-field">
                        </div>
                    </div>
                    <div>
                        <label class="block text-gray-300 text-sm font-medium mb-2">Alergias</label>
                        <input type="text" id="clientAllergies" class="input-field">
                    </div>
                    <div>
                        <label class="block text-gray-300 text-sm font-medium mb-2">Observações</label>
                        <textarea id="clientNotes" class="input-field"></textarea>
                    </div>
                    <div class="flex justify-end space-x-4 mt-6">
                        <button type="button" class="btn-secondary" onclick="closeModal('clientModal')">Cancelar</button>
                        <button type="submit" class="btn-primary">Salvar Cliente</button>
                    </div>
                </form>
            </div>
        </div>

        <div id="appointmentModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
            <div class="bg-gray-800 rounded-xl p-6 w-11/12 max-w-2xl">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold text-gray-100" id="appointmentModalTitle">Adicionar Novo Agendamento</h3>
                    <button class="text-gray-400 hover:text-gray-200" onclick="closeModal('appointmentModal')">
                        <i data-lucide="x"></i>
                    </button>
                </div>
                <form class="space-y-4" id="appointmentForm">
                    <input type="hidden" id="appointmentId">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-gray-300 text-sm font-medium mb-2">Cliente *</label>
                            <select id="appointmentClient" class="input-field" required>
                            </select>
                        </div>
                        <div>
                            <label class="block text-gray-300 text-sm font-medium mb-2">Serviço *</label>
                            <select id="appointmentService" class="input-field" required>
                            </select>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-gray-300 text-sm font-medium mb-2">Data *</label>
                            <input type="date" id="appointmentDate" class="input-field" required>
                        </div>
                        <div>
                            <label class="block text-gray-300 text-sm font-medium mb-2">Horário *</label>
                            <input type="time" id="appointmentTime" class="input-field" required>
                        </div>
                    </div>
                    <div>
                        <label class="block text-gray-300 text-sm font-medium mb-2">Status</label>
                        <select id="appointmentStatus" class="input-field">
                            <option value="Agendado">Agendado</option>
                            <option value="Realizado">Realizado</option>
                            <option value="Cancelado">Cancelado</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-gray-300 text-sm font-medium mb-2">Observações</label>
                        <textarea id="appointmentNotes" class="input-field"></textarea>
                    </div>
                    <div class="flex justify-end space-x-4 mt-6">
                        <button type="button" class="btn-secondary" onclick="closeModal('appointmentModal')">Cancelar</button>
                        <button type="submit" class="btn-primary">Salvar Agendamento</button>
                    </div>
                </form>
            </div>
        </div>

        <div id="serviceModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
            <div class="bg-gray-800 rounded-xl p-6 w-11/12 max-w-2xl">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold text-gray-100" id="serviceModalTitle">Adicionar Novo Serviço</h3>
                    <button class="text-gray-400 hover:text-gray-200" onclick="closeModal('serviceModal')">
                        <i data-lucide="x"></i>
                    </button>
                </div>
                <form class="space-y-4" id="serviceForm">
                    <input type="hidden" id="serviceId">
                    <div>
                        <label class="block text-gray-300 text-sm font-medium mb-2">Nome *</label>
                        <input type="text" id="serviceName" class="input-field" required>
                    </div>
                    <div>
                        <label class="block text-gray-300 text-sm font-medium mb-2">Descrição</label>
                        <textarea id="serviceDescription" class="input-field"></textarea>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-gray-300 text-sm font-medium mb-2">Duração (min) *</label>
                            <input type="number" id="serviceDuration" class="input-field" required>
                        </div>
                        <div>
                            <label class="block text-gray-300 text-sm font-medium mb-2">Preço (R$) *</label>
                            <input type="number" id="servicePrice" class="input-field" step="0.01" required>
                        </div>
                    </div>
                    <div>
                        <label class="block text-gray-300 text-sm font-medium mb-2">Status</label>
                        <select id="serviceStatus" class="input-field">
                            <option value="Ativo">Ativo</option>
                            <option value="Inativo">Inativo</option>
                        </select>
                    </div>
                    <div class="flex justify-end space-x-4 mt-6">
                        <button type="button" class="btn-secondary" onclick="closeModal('serviceModal')">Cancelar</button>
                        <button type="submit" class="btn-primary">Salvar Serviço</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // --- CONFIGURAÇÃO PARA PRODUÇÃO ---
        // ⚠️ SUBSTITUA ESTES VALORES PELOS SEUS LINKS REAIS DO RENDER E NETLIFY
        const API_BASE_URL = 'https://SEU-BACKEND.onrender.com/api/';
        const FRONTEND_URL = 'https://SEU-FRONTEND.netlify.app/';

        // Inicializa ícones
        lucide.createIcons();

        // --- FUNÇÕES DE NOTIFICAÇÃO ---
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.classList.add('show');
            setTimeout(() => notification.classList.remove('show'), 5000);
        }

        // --- FUNÇÕES DE NAVEGAÇÃO ---
        function showSection(sectionId, evt = null) {
            document.querySelectorAll('.content-section').forEach(section => section.classList.add('hidden'));
            document.querySelectorAll('.sidebar a').forEach(link => link.classList.remove('active'));
            document.getElementById(sectionId).classList.remove('hidden');
            if (evt && evt.target) evt.target.classList.add('active');

            if (sectionId === 'dashboard-section') {
                loadDashboardData();
            } else if (sectionId === 'clientes-section') {
                loadClients();
            } else if (sectionId === 'agendamentos-section') {
                loadAppointments();
                loadClientsForSelect();
                loadServicesForSelect();
            } else if (sectionId === 'servicos-section') {
                loadServices();
            } else if (sectionId === 'relatorios-section') {
                loadReports();
                loadCharts();
            }
        }

        // --- FUNÇÕES DE MODAL ---
        function openModal(modalId, data = null) {
            const modal = document.getElementById(modalId);
            modal.classList.remove('hidden');
            if (modalId === 'clientModal' && data) {
                document.getElementById('clientId').value = data._id;
                document.getElementById('clientName').value = data.name;
                document.getElementById('clientPhone').value = data.phone;
                document.getElementById('clientEmail').value = data.email || '';
                document.getElementById('clientStatus').value = data.status;
                document.getElementById('clientHeight').value = data.height || '';
                document.getElementById('clientWeight').value = data.weight || '';
                document.getElementById('clientDiseases').value = data.diseases || '';
                document.getElementById('clientAllergies').value = data.allergies || '';
                document.getElementById('clientNotes').value = data.notes || '';
                document.getElementById('clientModalTitle').textContent = 'Editar Cliente';
            } else if (modalId === 'clientModal') {
                document.getElementById('clientForm').reset();
                document.getElementById('clientId').value = '';
                document.getElementById('clientModalTitle').textContent = 'Adicionar Novo Cliente';
            } else if (modalId === 'appointmentModal' && data) {
                document.getElementById('appointmentId').value = data._id;
                document.getElementById('appointmentClient').value = data.client._id || data.client;
                document.getElementById('appointmentService').value = data.service._id || data.service;
                document.getElementById('appointmentDate').value = new Date(data.date).toISOString().split('T')[0];
                document.getElementById('appointmentTime').value = data.time;
                document.getElementById('appointmentStatus').value = data.status;
                document.getElementById('appointmentNotes').value = data.notes || '';
                document.getElementById('appointmentModalTitle').textContent = 'Editar Agendamento';
            } else if (modalId === 'appointmentModal') {
                document.getElementById('appointmentForm').reset();
                document.getElementById('appointmentId').value = '';
                document.getElementById('appointmentModalTitle').textContent = 'Adicionar Novo Agendamento';
            } else if (modalId === 'serviceModal' && data) {
                document.getElementById('serviceId').value = data._id;
                document.getElementById('serviceName').value = data.name;
                document.getElementById('serviceDescription').value = data.description || '';
                document.getElementById('serviceDuration').value = data.duration;
                document.getElementById('servicePrice').value = data.price;
                document.getElementById('serviceStatus').value = data.status;
                document.getElementById('serviceModalTitle').textContent = 'Editar Serviço';
            } else if (modalId === 'serviceModal') {
                document.getElementById('serviceForm').reset();
                document.getElementById('serviceId').value = '';
                document.getElementById('serviceModalTitle').textContent = 'Adicionar Novo Serviço';
            }
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
        }

        // --- FUNÇÕES DE API (SEM AUTENTICAÇÃO) ---
        async function apiRequest(endpoint, options = {}) {
            options.headers = { 'Content-Type': 'application/json' };
            try {
                const response = await fetch(`${API_BASE_URL}${endpoint}`, options);
                if (!response.ok) throw new Error(`Erro: ${response.status}`);
                return await response.json();
            } catch (error) {
                console.error('Erro na API:', error);
                showNotification(`Erro: ${error.message}`, 'error');
                return null;
            }
        }

        // --- FUNÇÕES DE CLIENTES ---
        async function loadClients() {
            const response = await apiRequest('/clients');
            if (response) {
                const tbody = document.getElementById('clientsTableBody');
                tbody.innerHTML = '';
                if (response.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="5" class="text-center text-gray-400">Nenhum cliente encontrado.</td></tr>';
                    return;
                }
                response.forEach(client => {
                    const row = document.createElement('tr');
                    const statusClass = `status-${client.status.toLowerCase().replace(' ', '-')}`;
                    row.innerHTML = `
                        <td class="font-medium">${client.name}</td>
                        <td>${client.phone}</td>
                        <td>${client.email || 'N/A'}</td>
                        <td><span class="${statusClass}">${client.status}</span></td>
                        <td>
                            <button class="btn-primary mr-2" onclick="viewClient('${client._id}')"><i data-lucide="eye" class="w-4 h-4"></i></button>
                            <button class="btn-primary mr-2" onclick="editClient('${client._id}')"><i data-lucide="edit" class="w-4 h-4"></i></button>
                            <button class="btn-danger" onclick="deleteClient('${client._id}')"><i data-lucide="trash-2" class="w-4 h-4"></i></button>
                        </td>
                    `;
                    tbody.appendChild(row);
                });
                lucide.createIcons();
            }
        }

        async function addClient(clientData) {
            const response = await apiRequest('/clients', { method: 'POST', body: JSON.stringify(clientData) });
            if (response) {
                showNotification('Cliente adicionado com sucesso!', 'success');
                loadClients();
                closeModal('clientModal');
            }
        }

        async function updateClient(id, clientData) {
            const response = await apiRequest(`/clients/${id}`, { method: 'PUT', body: JSON.stringify(clientData) });
            if (response) {
                showNotification('Cliente atualizado com sucesso!', 'success');
                loadClients();
                closeModal('clientModal');
            }
        }

        async function deleteClient(id) {
            if (confirm('Tem certeza que deseja excluir este cliente?')) {
                const response = await apiRequest(`/clients/${id}`, { method: 'DELETE' });
                if (response) {
                    showNotification('Cliente excluído com sucesso!', 'success');
                    loadClients();
                }
            }
        }

        async function viewClient(id) {
            const response = await apiRequest(`/clients/${id}`);
            if (response) {
                let details = `Nome: ${response.name}\nTelefone: ${response.phone}\nEmail: ${response.email || 'N/A'}\nStatus: ${response.status}\n`;
                details += `Altura: ${response.height || 'N/A'}cm\nPeso: ${response.weight || 'N/A'}kg\n`;
                details += `Doenças Preexistentes: ${response.diseases || 'Nenhuma'}\nAlergias: ${response.allergies || 'Nenhuma'}\n`;
                details += `Observações Internas: ${response.notes || 'Nenhuma'}\nÚltimo Agendamento: ${response.lastAppointment || 'N/A'}`;
                alert('Detalhes do Cliente:\n' + details);
            }
        }

        async function editClient(id) {
            const response = await apiRequest(`/clients/${id}`);
            if (response) openModal('clientModal', response);
        }

        async function searchClients() {
            const searchTerm = document.getElementById('searchClients').value.toLowerCase();
            if (!searchTerm) {
                loadClients();
                return;
            }
            const allClients = await apiRequest('/clients');
            if (allClients) {
                const filteredClients = allClients.filter(client =>
                    client.name.toLowerCase().includes(searchTerm) ||
                    client.phone.includes(searchTerm) ||
                    (client.email && client.email.toLowerCase().includes(searchTerm))
                );
                const tbody = document.getElementById('clientsTableBody');
                tbody.innerHTML = '';
                if (filteredClients.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="5" class="text-center text-gray-400">Nenhum cliente encontrado para a busca.</td></tr>';
                    return;
                }
                filteredClients.forEach(client => {
                    const row = document.createElement('tr');
                    const statusClass = `status-${client.status.toLowerCase().replace(' ', '-')}`;
                    row.innerHTML = `
                        <td class="font-medium">${client.name}</td>
                        <td>${client.phone}</td>
                        <td>${client.email || 'N/A'}</td>
                        <td><span class="${statusClass}">${client.status}</span></td>
                        <td>
                            <button class="btn-primary mr-2" onclick="viewClient('${client._id}')"><i data-lucide="eye" class="w-4 h-4"></i></button>
                            <button class="btn-primary mr-2" onclick="editClient('${client._id}')"><i data-lucide="edit" class="w-4 h-4"></i></button>
                            <button class="btn-danger" onclick="deleteClient('${client._id}')"><i data-lucide="trash-2" class="w-4 h-4"></i></button>
                        </td>
                    `;
                    tbody.appendChild(row);
                });
                lucide.createIcons();
            }
        }

        // --- FUNÇÕES DE AGENDAMENTOS ---
        async function loadAppointments() {
            const response = await apiRequest('/appointments');
            if (response) {
                const tbody = document.getElementById('appointmentsTableBody');
                tbody.innerHTML = '';
                if (response.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="6" class="text-center text-gray-400">Nenhum agendamento encontrado.</td></tr>';
                    return;
                }
                response.forEach(appointment => {
                    const statusClass = `status-${appointment.status.toLowerCase().replace(' ', '-')}`;
                    const formattedDate = new Date(appointment.date).toLocaleDateString('pt-BR');
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${formattedDate}</td>
                        <td>${appointment.time}</td>
                        <td>${appointment.client.name || 'Cliente não encontrado'}</td>
                        <td>${appointment.service.name || appointment.service}</td>
                        <td><span class="${statusClass}">${appointment.status}</span></td>
                        <td>
                            <button class="btn-primary mr-2" onclick="editAppointment('${appointment._id}')"><i data-lucide="edit" class="w-4 h-4"></i></button>
                            <button class="btn-danger" onclick="deleteAppointment('${appointment._id}')"><i data-lucide="trash-2" class="w-4 h-4"></i></button>
                        </td>
                    `;
                    tbody.appendChild(row);
                });
                lucide.createIcons();
            }
        }

        async function addAppointment(appointmentData) {
            const response = await apiRequest('/appointments', { method: 'POST', body: JSON.stringify(appointmentData) });
            if (response) {
                showNotification('Agendamento adicionado com sucesso!', 'success');
                loadAppointments();
                loadDashboardData();
                closeModal('appointmentModal');
            }
        }

        async function updateAppointment(id, appointmentData) {
            const response = await apiRequest(`/appointments/${id}`, { method: 'PUT', body: JSON.stringify(appointmentData) });
            if (response) {
                showNotification('Agendamento atualizado com sucesso!', 'success');
                loadAppointments();
                loadDashboardData();
                closeModal('appointmentModal');
            }
        }

        async function deleteAppointment(id) {
            if (confirm('Tem certeza que deseja excluir este agendamento?')) {
                const response = await apiRequest(`/appointments/${id}`, { method: 'DELETE' });
                if (response) {
                    showNotification('Agendamento excluído com sucesso!', 'success');
                    loadAppointments();
                    loadDashboardData();
                }
            }
        }

        async function editAppointment(id) {
            const response = await apiRequest(`/appointments/${id}`);
            if (response) {
                await loadClientsForSelect();
                await loadServicesForSelect();
                openModal('appointmentModal', response);
            }
        }

        async function filterAppointments() {
            const filterDate = document.getElementById('filterDate').value;
            if (!filterDate) {
                loadAppointments();
                return;
            }
            const allAppointments = await apiRequest('/appointments');
            if (allAppointments) {
                const filteredAppointments = allAppointments.filter(appointment =>
                    new Date(appointment.date).toISOString().split('T')[0] === filterDate
                );
                const tbody = document.getElementById('appointmentsTableBody');
                tbody.innerHTML = '';
                if (filteredAppointments.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="6" class="text-center text-gray-400">Nenhum agendamento encontrado para a data selecionada.</td></tr>';
                    return;
                }
                filteredAppointments.forEach(appointment => {
                    const statusClass = `status-${appointment.status.toLowerCase().replace(' ', '-')}`;
                    const formattedDate = new Date(appointment.date).toLocaleDateString('pt-BR');
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${formattedDate}</td>
                        <td>${appointment.time}</td>
                        <td>${appointment.client.name || 'Cliente não encontrado'}</td>
                        <td>${appointment.service.name || appointment.service}</td>
                        <td><span class="${statusClass}">${appointment.status}</span></td>
                        <td>
                            <button class="btn-primary mr-2" onclick="editAppointment('${appointment._id}')"><i data-lucide="edit" class="w-4 h-4"></i></button>
                            <button class="btn-danger" onclick="deleteAppointment('${appointment._id}')"><i data-lucide="trash-2" class="w-4 h-4"></i></button>
                        </td>
                    `;
                    tbody.appendChild(row);
                });
                lucide.createIcons();
            }
        }

        // --- FUNÇÕES DE SERVIÇOS ---
        async function loadServices() {
            const response = await apiRequest('/services');
            if (response) {
                const tbody = document.getElementById('servicesTableBody');
                tbody.innerHTML = '';
                if (response.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="6" class="text-center text-gray-400">Nenhum serviço encontrado.</td></tr>';
                    return;
                }
                response.forEach(service => {
                    const statusClass = `status-${service.status.toLowerCase().replace(' ', '-')}`;
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td class="font-medium">${service.name}</td>
                        <td>${service.description || ''}</td>
                        <td>${service.duration}</td>
                        <td>R$ ${parseFloat(service.price).toFixed(2)}</td>
                        <td><span class="${statusClass}">${service.status}</span></td>
                        <td>
                            <button class="btn-primary mr-2" onclick="editService('${service._id}')"><i data-lucide="edit" class="w-4 h-4"></i></button>
                            <button class="btn-danger" onclick="deleteService('${service._id}')"><i data-lucide="trash-2" class="w-4 h-4"></i></button>
                        </td>
                    `;
                    tbody.appendChild(row);
                });
                lucide.createIcons();
            }
        }

        async function addService(serviceData) {
            const response = await apiRequest('/services', { method: 'POST', body: JSON.stringify(serviceData) });
            if (response) {
                showNotification('Serviço adicionado com sucesso!', 'success');
                loadServices();
                closeModal('serviceModal');
            }
        }

        async function updateService(id, serviceData) {
            const response = await apiRequest(`/services/${id}`, { method: 'PUT', body: JSON.stringify(serviceData) });
            if (response) {
                showNotification('Serviço atualizado com sucesso!', 'success');
                loadServices();
                closeModal('serviceModal');
            }
        }

        async function deleteService(id) {
            if (confirm('Tem certeza que deseja excluir este serviço?')) {
                const response = await apiRequest(`/services/${id}`, { method: 'DELETE' });
                if (response) {
                    showNotification('Serviço excluído com sucesso!', 'success');
                    loadServices();
                }
            }
        }

        async function editService(id) {
            const response = await apiRequest(`/services/${id}`);
            if (response) openModal('serviceModal', response);
        }

        // --- FUNÇÕES DE PREENCHIMENTO DE SELECTS ---
        async function loadClientsForSelect() {
            const response = await apiRequest('/clients');
            if (response) {
                const select = document.getElementById('appointmentClient');
                select.innerHTML = '';
                response.forEach(client => {
                    const option = document.createElement('option');
                    option.value = client._id;
                    option.textContent = client.name;
                    select.appendChild(option);
                });
            }
        }

        async function loadServicesForSelect() {
            const response = await apiRequest('/services');
            if (response) {
                const select = document.getElementById('appointmentService');
                select.innerHTML = '';
                response.forEach(service => {
                    const option = document.createElement('option');
                    option.value = service._id;
                    option.textContent = service.name;
                    select.appendChild(option);
                });
            }
        }

        // --- FUNÇÕES DO DASHBOARD ---
        async function loadDashboardData() {
            const [clientsRes, appointmentsRes] = await Promise.all([
                apiRequest('/clients'),
                apiRequest('/appointments')
            ]);
            if (clientsRes && appointmentsRes) {
                document.getElementById('totalClientsCount').textContent = clientsRes.length;
                const activeClients = clientsRes.filter(c => c.status === 'Ativo').length;
                document.getElementById('activeClientsCount').textContent = activeClients;
                const today = new Date().toISOString().split('T')[0];
                const todaysAppointments = appointmentsRes.filter(a => new Date(a.date).toISOString().split('T')[0] === today).length;
                document.getElementById('todaysAppointmentsCount').textContent = todaysAppointments;
                const startOfMonth = new Date(new Date().getFullYear(), new Date().getMonth(), 1);
                const endOfMonth = new Date(new Date().getFullYear(), new Date().getMonth() + 1, 0);
                const monthlyAppointments = appointmentsRes.filter(a => {
                    const apptDate = new Date(a.date);
                    return apptDate >= startOfMonth && apptDate <= endOfMonth && a.status === 'Realizado';
                });
                let monthlyRevenue = monthlyAppointments.reduce((sum, appt) => sum + (appt.service?.price || 300), 0);
                document.getElementById('monthlyRevenue').textContent = `R$ ${monthlyRevenue.toFixed(2)}`;
                const sortedAppointments = appointmentsRes.sort((a, b) => new Date(a.date) - new Date(b.date));
                const upcomingAppointments = sortedAppointments.filter(a => new Date(a.date) >= new Date()).slice(0, 5);
                const upcomingList = document.getElementById('upcomingAppointmentsList');
                upcomingList.innerHTML = '';
                if (upcomingAppointments.length === 0) {
                    upcomingList.innerHTML = '<p class="text-gray-400">Nenhum agendamento futuro encontrado.</p>';
                } else {
                    upcomingAppointments.forEach(appt => {
                        const formattedDate = new Date(appt.date).toLocaleDateString('pt-BR');
                        const apptDiv = document.createElement('div');
                        apptDiv.className = 'p-3 border-b border-gray-600';
                        apptDiv.innerHTML = `<p class="text-sm"><strong class="text-yellow-400">${formattedDate} ${appt.time}</strong> - ${appt.client.name || 'Cliente não encontrado'} - ${appt.service.name || appt.service} <span class="status-${appt.status.toLowerCase().replace(' ', '-')}">(${appt.status})</span></p>`;
                        upcomingList.appendChild(apptDiv);
                    });
                }
                const recentClients = clientsRes.sort((a, b) => new Date(b.createdAt || b._id) - new Date(a.createdAt || a._id)).slice(0, 5);
                const recentList = document.getElementById('recentClientsList');
                recentList.innerHTML = '';
                if (recentClients.length === 0) {
                    recentList.innerHTML = '<p class="text-gray-400">Nenhum cliente encontrado.</p>';
                } else {
                    recentClients.forEach(client => {
                        const clientDiv = document.createElement('div');
                        clientDiv.className = 'p-3 border-b border-gray-600';
                        clientDiv.innerHTML = `<p class="text-sm"><strong class="text-yellow-400">${client.name}</strong> - ${client.phone} <span class="status-${client.status.toLowerCase().replace(' ', '-')}">(${client.status})</span></p>`;
                        recentList.appendChild(clientDiv);
                    });
                }
            }
        }

        // --- FUNÇÕES DE RELATÓRIOS ---
        async function loadReports() {
            const period = document.getElementById('reportPeriod').value;
            let endpoint = '';
            
            if (period === 'daily') {
                const date = document.getElementById('reportDate').value || new Date().toISOString().split('T')[0];
                endpoint = `/reports/daily?date=${date}`;
            } else if (period === 'weekly') {
                endpoint = '/reports/weekly';
            } else if (period === 'monthly') {
                const monthInput = document.getElementById('reportMonth').value;
                if (monthInput) {
                    const [year, month] = monthInput.split('-');
                    endpoint = `/reports/monthly?year=${year}&month=${parseInt(month)}`;
                } else {
                    endpoint = '/reports/monthly';
                }
            }

            const data = await apiRequest(endpoint);
            if (data) {
                document.getElementById('reportAppointments').textContent = data.appointments || 0;
                document.getElementById('reportRevenue').textContent = data.revenueFormatted || `R$ ${data.revenue?.toFixed(2) || '0,00'}`;
                document.getElementById('reportNewClients').textContent = data.newClients || 0;
                document.getElementById('reportDetails').innerHTML = `
                    <p><strong>Período:</strong> ${data.date || data.weekStart || `${data.month}/${data.year}`}</p>
                    <p><strong>Agendamentos realizados:</strong> ${data.appointments || 0}</p>
                    <p><strong>Receita total:</strong> ${data.revenueFormatted || `R$ ${data.revenue?.toFixed(2) || '0,00'}`}</p>
                    <p><strong>Novos clientes:</strong> ${data.newClients || 0}</p>
                `;
            }
        }

        function exportReportToCSV() {
            const data = {
                period: document.getElementById('reportPeriod').value,
                appointments: document.getElementById('reportAppointments').textContent,
                revenue: document.getElementById('reportRevenue').textContent,
                newClients: document.getElementById('reportNewClients').textContent
            };
            const csv = `Período,Agendamentos,Receita,Novos Clientes\n${Object.values(data).join(',')}`;
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `relatorio-${data.period}.csv`;
            a.click();
        }

        // Atualiza filtros quando muda o período
        document.getElementById('reportPeriod').addEventListener('change', function() {
            const period = this.value;
            document.getElementById('dateFilter').classList.toggle('hidden', period !== 'daily');
            document.getElementById('monthFilter').classList.toggle('hidden', period !== 'monthly');
        });

        // Inicializa datas
        document.getElementById('reportDate').valueAsDate = new Date();
        document.getElementById('reportMonth').value = new Date().toISOString().slice(0, 7);

        // --- GRÁFICOS ---
        let revenueChart = null;
        let newClientsChart = null;

        async function loadCharts() {
            // Simulação de dados mensais (em produção, viria da API)
            const months = ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'];
            const revenueData = Array(12).fill(0).map((_, i) => Math.floor(Math.random() * 5000) + 1000);
            const clientsData = Array(12).fill(0).map((_, i) => Math.floor(Math.random() * 20) + 5);

            const ctx1 = document.getElementById('revenueChart').getContext('2d');
            if (revenueChart) revenueChart.destroy();
            revenueChart = new Chart(ctx1, {
                type: 'line',
                data: {
                    labels: months,
                    datasets: [{
                        label: 'Receita (R$)',
                        data: revenueData,
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });

            const ctx2 = document.getElementById('newClientsChart').getContext('2d');
            if (newClientsChart) newClientsChart.destroy();
            newClientsChart = new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: months,
                    datasets: [{
                        label: 'Novos Clientes',
                        data: clientsData,
                        backgroundColor: '#8b5cf6'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: { beginAtZero: true, ticks: { stepSize: 5 } }
                    }
                }
            });
        }

        // --- EVENT LISTENERS PARA FORMS ---
        document.getElementById('clientForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const id = document.getElementById('clientId').value;
            const clientData = {
                name: document.getElementById('clientName').value,
                phone: document.getElementById('clientPhone').value,
                email: document.getElementById('clientEmail').value,
                status: document.getElementById('clientStatus').value,
                height: document.getElementById('clientHeight').value ? parseInt(document.getElementById('clientHeight').value) : undefined,
                weight: document.getElementById('clientWeight').value ? parseFloat(document.getElementById('clientWeight').value) : undefined,
                diseases: document.getElementById('clientDiseases').value,
                allergies: document.getElementById('clientAllergies').value,
                notes: document.getElementById('clientNotes').value
            };
            if (id) {
                await updateClient(id, clientData);
            } else {
                await addClient(clientData);
            }
        });

        document.getElementById('appointmentForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const id = document.getElementById('appointmentId').value;
            const appointmentData = {
                client: document.getElementById('appointmentClient').value,
                service: document.getElementById('appointmentService').value,
                date: document.getElementById('appointmentDate').value,
                time: document.getElementById('appointmentTime').value,
                status: document.getElementById('appointmentStatus').value,
                notes: document.getElementById('appointmentNotes').value
            };
            if (id) {
                await updateAppointment(id, appointmentData);
            } else {
                await addAppointment(appointmentData);
            }
        });

        document.getElementById('serviceForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const id = document.getElementById('serviceId').value;
            const serviceData = {
                name: document.getElementById('serviceName').value,
                description: document.getElementById('serviceDescription').value,
                duration: parseInt(document.getElementById('serviceDuration').value),
                price: parseFloat(document.getElementById('servicePrice').value),
                status: document.getElementById('serviceStatus').value
            };
            if (id) {
                await updateService(id, serviceData);
            } else {
                await addService(serviceData);
            }
        });

        // --- INICIALIZAÇÃO ---
        document.addEventListener('DOMContentLoaded', () => {
            // Atualize estas URLs com seus links reais do Render e Netlify
            // const API_BASE_URL = 'https://SEU-BACKEND.onrender.com/api/';
            // const FRONTEND_URL = 'https://SEU-FRONTEND.netlify.app/';
            
            showSection('dashboard-section');
            loadCharts();
        });
    </script>
</body>
</html>
